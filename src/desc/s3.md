# S3 сервер

## Описание

**S3 сервер** (S3 Server) - объектное (файловое) хранилище платформы ([S3 хранилище](/docs/intro/architecture.md#компоненты)) для размещения данных (скрипты, файлы пакетов и т.п.).

В качестве базового продукта используется программный продукт [MinIO](https://min.io/), который позволяет организовать различные архитектуры (в том числе распределенные) хранения данных, а также совместим с стандартом доступа к данным [S3 API](https://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html).

Платформа позволяет производить подключение внешних хранилищ, которые используют для доступа указанный тип API. Например, можно использовать внешнее облачное хранилище на основе [Yandex Object Storage](https://cloud.yandex.com/en/services/storage), [VK Cloud Storage](https://mcs.mail.ru/storage/) или [Amazon S3](https://aws.amazon.com/s3/). Таким образом, можно подключать неограниченное количество объектных хранилищ как локальных так и внешних, и использовать их для хранения данных различных проектов. Если разные проекты используют один и тот же экземпляр объектного хранилища, то с целью изоляции они размещаются в различных бакетах, которые обеспечивают как логическое, так и физическое раздельное размещение данных.

![S3 info](/images/common/admin_s3_disk.png)

Структура:

- Панель описания

  - Логотип
  - Название
  - Описание
  - <span class='iconify-inline' data-icon='mdi:link'></span> API адрес
  - <span class='iconify-inline' data-icon='mdi:eye' style="color: blue"></span> Общедоступный - наличие общего доступа
  - <span class='iconify-inline' data-icon='mdi:cash'></span> Цена за МБ - стоимость хранения 1 МБ

  Также для владельцев доступна информация:

  - <span class='iconify-inline' data-icon='mdi:wallet'></span> Баланс - баланс [счета][1]

    При нажатии происходит открытие окна [баланса](#баланс) хранилища.

  - <span class='iconify-inline' data-icon='mdi:bucket-outline'></span> Число корзин - общее количество корзин
  - <span class='iconify-inline' data-icon='mdi:file-multiple-outline'></span> Число файлов - общее количество файлов
  - <span class='iconify-inline' data-icon='mdi:harddisk'></span> Объем - общий занятый объем
  - Кнопка "РЕДАКТИРОВАТЬ"

- <span class='iconify-inline' data-icon='mdi:folder-information'></span> ДИСКОВОЕ ПРОСТРАНСТВО - панель использования диского пространства

  > <span class='iconify' data-icon='emojione-v1:warning' style='color: #e7c000; font-size: 24px;'></span> Доступно только для владельца.

  - Панель инструментов
    - <span class='iconify-inline' data-icon='mdi:calendar-range'></span> Период график
    - <span class='iconify-inline' data-icon='mdi:refresh'></span> Кнопка обновления графиков
  - График изменения числа корзин
  - График изменения числа файлов
  - График изменения общего занятого объема
  - Журнал очистки хранилища
    ::: tip <span class='iconify' data-icon='mdi:information' style='color: #42b983; font-size: 24px;'></span>
    При удалении данных они фактически остаются в хранилище. Для реального освобождении пространства требуется запуск очистки хранилища. Очистка может быть запущена владельцем сервера, в противном случае очистка будет запущена автоматически раз в сутки платформой. При этом также происходит пересчет используемого проектами пространства на S3 сервере.
    :::

    - Панель инструментов
    - <span class='iconify-inline' data-icon='mdi:cog-clockwise'></span> Кнопка запуска очистки
    - <span class='iconify-inline' data-icon='mdi:refresh'></span> Кнопка обновления таблицы истории очистки
    - Таблица истории очистки

## Баланс

Окно баланса хранилища отображает баланс [счета][1] и список [транзакций][2] по вводу и выводу средств на счет.

![S3 balance](/images/common/admin_s3_balance.png)

Структура:

- Панель описания

  - Изображение хранилища
  - Имя-ссылка хранилища
  - <span class='iconify-inline' data-icon='mdi:wallet'></span> Баланс - баланс счета
  - Кнопка "ВЫВЕСТИ" - кнопка вывода средств на счет владельца

- Панель транзакций
  - Панель инструментов
    - <span class='iconify-inline' data-icon='mdi:calendar-range'></span> Период
    - <span class='iconify-inline' data-icon='mdi:refresh'></span> Кнопка обновления
  - Таблица транзакций
    - Создано - дата осуществления транзакции
    - Назначение - тип транзакции
    - Контрагент - контрагент транзакции
    - Сумма - сумма транзакции
  - Панель навигации

После нажатия на кнопку **ВЫВЕСТИ** можно осуществить вывод средств на счет владельца хранилища.

![S3 balance out](/images/common/admin_s3_balance_out.png)

[1]: /docs/desc/finance.md#cчета
[2]: /docs/desc/finance.md#транзакции
